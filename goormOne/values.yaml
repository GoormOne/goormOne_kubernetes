global:
  configMap:
    name: msa-config
  secret:
    name: msa-secret
services:
  user:
    enabled : true #이 서비스를 배포할 것인가?
    replicaCount : 2
    image:
      repository: 490913547024.dkr.ecr.ap-northeast-2.amazonaws.com/user-service
      tag: bc93aed
      pullPolicy : IfNotPresent
    service:
      type: ClusterIP
      port: 80
      targetPort: 8080
    
    # 카나리 배포 설정
    canary:
      enabled: true  # 카나리 배포 활성화
      initialWeight: 10  # 초기 트래픽 비율 (10%)
      middleWeight: 50   # 중간 트래픽 비율 (50%)
      pauseDuration: "30s"  # 각 단계별 대기 시간
      autoPromotionEnabled: false  # 자동 프로모션 비활성화 (수동 승인)
      analysis:
        enabled: false  # 메트릭 기반 분석 비활성화 (나중에 Prometheus 설정 후 활성화)

    livenessProbe:
      httpGet:
        path: /actuator/health
        port: 8080
      initialDelaySeconds: 60
      periodSeconds: 30
      timeoutSeconds: 10
      failureThreshold: 3
    
    readinessProbe:
      httpGet:
        path: /actuator/health/readiness
        port: 8080
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3

    env:
      - name: SPRING_PROFILES_ACTIVE
        value: "dev"

    resources:
      requests:
        cpu: 500m
        memory: 512Mi
      limits:
        cpu: 1000m
        memory: 1Gi

  order:
    enabled: true #이 서비스를 배포할 것인가?
    replicaCount: 2
    image:
      repository: 490913547024.dkr.ecr.ap-northeast-2.amazonaws.com/order-service
      tag: 3f6c7f2
      pullPolicy: IfNotPresent
    service:
      type: ClusterIP
      port: 80
      targetPort: 8080

    resources:
      requests:
        cpu: 500m
        memory: 512Mi
      limits:
        cpu: 1000m
        memory: 1Gi
  store:
    enabled : true #이 서비스를 배포할 것인가?
    replicaCount : 2
    image:
      repository: 490913547024.dkr.ecr.ap-northeast-2.amazonaws.com/store-service
      tag: 3f6c7f2
      pullPolicy : IfNotPresent
    service:
      type: ClusterIP
      port: 80
      targetPort: 8080

    resources:
      requests:
        cpu: 500m
        memory: 512Mi
      limits:
        cpu: 1000m
        memory: 1Gi
  auth:
    enabled: true #이 서비스를 배포할 것인가?
    replicaCount: 2
    image:
      repository: 490913547024.dkr.ecr.ap-northeast-2.amazonaws.com/auth-service
      tag: 9d15e96
      pullPolicy: IfNotPresent
    service:
      type: ClusterIP
      port: 80
      targetPort: 8080
    resources:
      requests:
        cpu: 500m
        memory: 512Mi
      limits:
        cpu: 1000m
        memory: 1Gi
  ai:
    enabled: true #이 서비스를 배포할 것인가?
    replicaCount: 2
    image:
      repository: 490913547024.dkr.ecr.ap-northeast-2.amazonaws.com/ai-service
      tag: 2554cd4
      pullPolicy: IfNotPresent
    service:
      type: ClusterIP
      port: 80
      targetPort: 8080
    resources:
      requests:
        cpu: 500m
        memory: 512Mi
      limits:
        cpu: 1000m
        memory: 1Gi

  payment:
    enabled: true #이 서비스를 배포할 것인가?
    replicaCount: 2
    image:
      repository: 490913547024.dkr.ecr.ap-northeast-2.amazonaws.com/payment-service
      tag: latest
      pullPolicy: IfNotPresent
    service:
      type: ClusterIP
      port: 80
      targetPort: 8080

    resources:
      requests:
        cpu: 500m
        memory: 512Mi
      limits:
        cpu: 1000m
        memory: 1Gi
  common:
    enabled: true #이 서비스를 배포할 것인가?
    replicaCount: 2
    image:
      repository: 490913547024.dkr.ecr.ap-northeast-2.amazonaws.com/common-service
      tag: bc93aed
      pullPolicy: IfNotPresent
    service:
      type: ClusterIP
      port: 80
      targetPort: 8080

    resources:
      requests:
        cpu: 500m
        memory: 512Mi
      limits:
        cpu: 1000m
        memory: 1Gi

# ConfigMap configuration
configMap:
  enabled: true
  data:
    SPRING_PROFILES_ACTIVE: "dev"
    SERVER_PORT: "8080"
    # Add other config values as needed

# Secret configuration
secret:
  enabled: true
  stringData:
    DB_USERNAME: "YOUR_DB_USERNAME"
    DB_PASSWORD: "YOUR_DB_PASSWORD"
    REDIS_PASSWORD: "YOUR_REDIS_PASSWORD"
    OPENAI_API_KEY: "YOUR_OPENAI_API_KEY"
    MONGODB_URI: "YOUR_MONGODB_URI"
    MONGODB_NAME: "YOUR_MONGODB_NAME"


